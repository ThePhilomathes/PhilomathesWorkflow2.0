import{x,c as y,a as s,h as k,f as b,o as w}from"./index-B2Z-3kuf.js";import{_ as S}from"./plugin-vueexport-helper-DlAUqK2U.js";const A={class:"w-full bg-sky-50 min-h-screen flex flex-col"},B={class:"flex flex-1"},N={class:"flex-1 p-6 flex flex-col items-center justify-start",id:"mainContent"},E={class:"w-full max-w-5xl bg-white shadow-xl rounded-xl border border-sky-200 overflow-hidden"},C={class:"bg-gradient-to-r from-sky-800 to-sky-600 p-6 flex justify-between items-center"},I={class:"flex gap-3"},L={__name:"Archive",setup($){x(()=>{let o=JSON.parse(localStorage.getItem("workflowArchive"))||[];const e=document.getElementById("cardContainer"),v=document.getElementById("emptyState"),f=document.getElementById("panelContent");function m(){localStorage.setItem("workflowArchive",JSON.stringify(o))}function h(i){localStorage.setItem("workflows",JSON.stringify(i))}function d(i){if(e.innerHTML="",f.innerHTML="",i.length===0){v.classList.remove("hidden");return}v.classList.add("hidden"),i.forEach((t,r)=>{const n=document.createElement("div");n.className="workflow-card bg-white shadow-md rounded-lg border border-sky-200",n.style.animationDelay=`${r*.15}s`;let a="bg-red-100 text-red-700";t.Status==="For Approval"&&(a="bg-yellow-100 text-yellow-700"),t.Status==="Approved"&&(a="bg-green-100 text-green-700");const l=document.createElement("div");l.className="flex justify-between items-center p-4 bg-sky-50 rounded-t-lg",l.innerHTML=`
          <span class="font-bold text-sky-800">
            Department: ${t.Department||""} | Activity: ${t["Activity Name (if applicable)"]||""}
          </span>
          <span class="px-2 py-1 rounded text-xs ${a}">${t.Status}</span>
        `;const p=document.createElement("div");p.className="p-4",p.innerHTML=`
          <div><strong>Task Name:</strong> ${t["Task Name"]||""}</div>
          <div><strong>KPI:</strong> ${t["Task KPI"]||""}</div>
          <div><strong>Workflow Name:</strong> ${t["Workflow Name"]||""}</div>
          <div><strong>Archived At:</strong> ${t.archivedAt||"N/A"}</div>
          <button class="bg-green-100 hover:bg-green-200 text-green-700 font-semibold px-3 py-1 rounded text-xs restoreBtn">
            Restore Workflow
          </button>
 <button class="bg-red-100 hover:bg-red-200 text-red-700 font-semibold px-3 py-1 rounded text-xs deleteBtn">
      Delete Permanently
    </button>
  </div>
`,p.querySelector(".restoreBtn").addEventListener("click",()=>{let g=JSON.parse(localStorage.getItem("workflows"))||[];g.push(t),h(g),o.splice(r,1),m(),d(o)}),p.querySelector(".deleteBtn").addEventListener("click",()=>{confirm("Are you sure you want to permanently delete this workflow?")&&(o.splice(r,1),m(),d(o))}),n.appendChild(l),n.appendChild(p),e.appendChild(n)});const c={};i.forEach((t,r)=>{c[t.Department]||(c[t.Department]=[]),c[t.Department].push({...t,index:r})}),Object.keys(c).forEach(t=>{const r=document.createElement("div");r.className="sidebar-dept",r.innerHTML=`<h3 class="font-bold">${t}</h3>`,c[t].forEach(n=>{const a=document.createElement("div");a.className="sidebar-item text-sm",a.innerHTML=`
            <span class="cursor-pointer text-sky-700 hover:underline">${n["Workflow Name"]}</span>
            <button class="text-green-600 hover:text-green-800 text-xs restoreBtn">↩ Restore</button>
            <button class="text-red-600 hover:text-red-800 text-xs deleteBtn">✖ Delete</button>
  </div>
          `,a.querySelector("span").addEventListener("click",()=>{e.children[n.index].scrollIntoView({behavior:"smooth",block:"center"})}),a.querySelector(".deleteBtn").addEventListener("click",()=>{confirm("Are you sure you want to permanently delete this workflow?")&&(o.splice(n.index,1),m(),d(o))}),a.querySelector(".restoreBtn").addEventListener("click",()=>{let l=JSON.parse(localStorage.getItem("workflows"))||[];n.archivedAt=new Date().toLocaleString(),l.push(n),localStorage.setItem("workflows",JSON.stringify(l)),o.splice(n.index,1),m(),d(o)}),r.appendChild(a)}),f.appendChild(r)})}d(o)});const u=o=>{b.push({name:o})};return(o,e)=>(w(),y("div",A,[e[6]||(e[6]=s("nav",{class:"w-full bg-sky-800 text-white px-6 py-3 flex justify-between items-center shadow"},[s("span",{class:"font-bold text-lg"},"Workflow System")],-1)),s("div",B,[e[5]||(e[5]=s("aside",{id:"managementPanel",class:"w-64 bg-sky-100 border-r border-sky-300 p-4 overflow-y-auto flex-shrink-0"},[s("h2",{class:"font-bold text-sky-800 mb-4"},"Archived Workflows"),s("div",{id:"panelContent",class:"space-y-4"})],-1)),s("main",N,[s("div",E,[s("div",C,[e[3]||(e[3]=s("h1",{class:"text-2xl font-bold text-white"},"Archive Dashboard",-1)),s("div",I,[s("a",{onClick:e[0]||(e[0]=v=>u("WorkflowAdmin")),class:"bg-sky-600 text-white px-4 py-2 rounded-lg shadow hover:bg-sky-500 transition"}," Dashboard "),s("a",{onClick:e[1]||(e[1]=v=>u("ManualInput")),class:"bg-sky-600 text-white px-4 py-2 rounded-lg shadow hover:bg-sky-500 transition"}," Manual Workflow Input "),e[2]||(e[2]=s("button",{id:"toggleSidebarBtn",class:"bg-white text-sky-800 px-4 py-2 rounded-lg shadow hover:bg-sky-100 transition"}," Toggle Sidebar ",-1))])]),e[4]||(e[4]=k('<div class="p-8" data-v-76614c62><div id="cardContainer" class="space-y-4" data-v-76614c62></div><div id="emptyState" class="flex flex-col items-center justify-center mt-12 text-sky-700" data-v-76614c62><svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mb-4 text-sky-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-76614c62><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-6h6v6h5v2H4v-2h5z" data-v-76614c62></path></svg><p class="italic text-lg" data-v-76614c62>No archived workflows yet.</p></div></div>',1))])])])]))}},W=S(L,[["__scopeId","data-v-76614c62"]]);export{W as default};
